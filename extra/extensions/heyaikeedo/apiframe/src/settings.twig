{% extends "/layouts/main.twig" %}
{% set active_menu = 'settings' %}

{% set xdata = 'settings' %}
{% block title p__('title', 'APIFrame Midjourney settings') %}

{% block template %}
<div>
  {% include "snippets/back.twig" with {link: 'admin/settings', label: 'Settings'} %}

  <h1 class="mt-4">APIFrame Midjourney</h1>
  <p class="text-content-dimmed">
    Professional Midjourney API integration with support for versions 6.1 and 7. 
    Generate high-quality images with fast and turbo modes.
  </p>
</div>

<x-form>
  <form class="flex flex-col gap-8" @submit.prevent="submit" x-ref="form">
    <div class="flex flex-col gap-2">
      <section class="flex flex-col gap-6 box" data-density="comfortable">
        <h2>{{ p__('heading', 'API Configuration') }}</h2>

        <div>
          <label for="apiframe.api_key">
            {{ p__('label', 'API Key') }}
          </label>

          <div class="relative mt-2" x-data="{isVisible: false}">
            <input class="input pr-11" id="apiframe.api_key"
              name="apiframe[api_key]"
              :type="isVisible ? 'text' : 'password'" autocomplete="off"
              placeholder="{{ __('Enter your APIFrame API key') }}"
              value="{{ environment == 'demo' ? 'hidden-in-demo' : option.apiframe.api_key ?? '' }}"
              required>

            <button type="button"
              class="absolute text-2xl -translate-y-1/2 top-1/2 right-3 text-content-dimmed"
              @click="isVisible = !isVisible">
              <i class="block ti"
                :class="{'ti-eye-closed' : isVisible, 'ti-eye': !isVisible}"></i>
            </button>
          </div>

          <ul class="m-3 mb-0 text-xs list-disc list-inside text-content-dimmed">
            <li>
              {{ __('Get your API key from') }}
              <a href="https://apiframe.ai" target="_blank" class="text-content hover:underline">
                {{ p__('link', 'APIFrame Dashboard') }}
              </a>
            </li>
            <li>
              {{ __('APIFrame provides professional Midjourney API access') }}
            </li>
            <li>
              {{ __('Supports Midjourney versions 6.1 and 7') }}
            </li>
          </ul>
        </div>
      </section>

      <section class="flex flex-col gap-6 box" data-density="comfortable">
        <h2>{{ p__('heading', 'Model Information') }}</h2>
        
        <div class="grid gap-4 md:grid-cols-2">
          <div class="p-4 border rounded-lg border-line-dimmed">
            <h3 class="font-semibold text-content">Midjourney v6.1</h3>
            <p class="mt-2 text-sm text-content-dimmed">
              Enhanced photorealism and improved text rendering capabilities.
            </p>
            <ul class="mt-2 text-xs list-disc list-inside text-content-dimmed">
              <li>Fast and turbo modes available</li>
              <li>Superior image quality</li>
              <li>Better prompt adherence</li>
            </ul>
          </div>
          
          <div class="p-4 border rounded-lg border-line-dimmed">
            <h3 class="font-semibold text-content">Midjourney v7</h3>
            <p class="mt-2 text-sm text-content-dimmed">
              Latest Midjourney model with cutting-edge capabilities.
            </p>
            <ul class="mt-2 text-xs list-disc list-inside text-content-dimmed">
              <li>State-of-the-art generation</li>
              <li>Enhanced detail and quality</li>
              <li>Improved artistic interpretation</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <div class="flex justify-end gap-4">
      <a href="admin/settings" class="button button-outline">
        {{ p__('button', 'Cancel') }}
      </a>

      <button class="button button-accent" type="submit"
        :processing="isProcessing">
        {% include "/snippets/spinner.twig" %}

        {{ p__('button', 'Save changes') }}
      </button>
    </div>
  </form>
</x-form>

<div class="mt-8">
  <section class="box" data-density="comfortable">
    <h2>{{ p__('heading', 'Documentation') }}</h2>
    <p class="text-content-dimmed">
      {{ __('Learn more about APIFrame and Midjourney integration:') }}
    </p>
    <ul class="mt-4 space-y-2 text-sm">
      <li>
        <a href="https://docs.apiframe.ai/pro-midjourney-api/api-endpoints/imagine.md" 
           target="_blank" class="text-accent hover:underline">
          {{ __('APIFrame Midjourney API Documentation') }} ↗
        </a>
      </li>
      <li>
        <a href="https://apiframe.ai" target="_blank" class="text-accent hover:underline">
          {{ __('APIFrame Official Website') }} ↗
        </a>
      </li>
      <li>
        <a href="https://docs.aikeedo.com/" target="_blank" class="text-accent hover:underline">
          {{ __('Aikeedo Plugin Development Guide') }} ↗
        </a>
      </li>
    </ul>
  </section>
</div>

{% endblock %}
